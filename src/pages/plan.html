<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>–ü–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è | –¢–µ—Ö–Ω–æ–õ–∞–π–Ω</title>
		<link rel="stylesheet" href="../style/style.css" />
		<link rel="icon" href="../img/MainLogo.svg" type="image/svg+xml" />
	</head>
	<body>
		<div id="app">
			<nav class="navbar">
				<div class="nav-container">
					<div class="nav-logo">
						<img src="../img/MainLogo.svg" alt="Logo" class="logo-img" />
						<span class="logo-text">–¢–µ—Ö–Ω–æ–õ–∞–π–Ω</span>
					</div>
					<div class="nav-menu" id="navMenu">
						<a href="../index.html" class="nav-link">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
						<a href="courses.html" class="nav-link">–ú–æ–∏ –∫—É—Ä—Å—ã</a>
						<a href="plan.html" class="nav-link active">–ü–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è</a>
						<div class="user-section">
							<span class="user-name" id="userName">–ü–µ—Ç—Ä–æ–≤ –ê.–í.</span>
							<button class="btn-logout" id="logoutBtn">–í—ã–π—Ç–∏</button>
						</div>
					</div>
					<button class="nav-toggle" id="navToggle">
						<span></span>
						<span></span>
						<span></span>
					</button>
				</div>
			</nav>

			<main class="main-content">
				<div class="container">
					<h1 class="page-title">–ü–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è</h1>

					<!-- –ì—Ä–∞—Ñ–∏–∫ –∫—É—Ä—Å–æ–≤ -->
					<section class="card">
						<div class="card-header">
							<h2 class="card-title">–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –∫—É—Ä—Å–æ–≤</h2>
						</div>
						<div id="coursesTimeline" class="timeline">
							<!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
						</div>
					</section>

					<!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
					<section class="card">
						<div class="card-header">
							<h2 class="card-title">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é</h2>
						</div>
						<div id="recommendationsList" class="recommendations">
							<!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
						</div>
					</section>

					<!-- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ–±—É—á–µ–Ω–∏—è -->
					<section class="card">
						<div class="card-header">
							<h2 class="card-title">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ–±—É—á–µ–Ω–∏—è</h2>
						</div>
						<div class="priority-grid">
							<div class="priority-item high">
								<div class="priority-icon">üî•</div>
								<div class="priority-content">
									<h3>–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</h3>
									<p>–ö—É—Ä—Å—ã, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—é –≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞</p>
								</div>
							</div>
							<div class="priority-item medium">
								<div class="priority-icon">‚è≥</div>
								<div class="priority-content">
									<h3>–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</h3>
									<p>–ü–ª–∞–Ω–æ–≤–æ–µ –æ–±—É—á–µ–Ω–∏–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–≤–∞—Ä—Ç–∞–ª–∞</p>
								</div>
							</div>
							<div class="priority-item low">
								<div class="priority-icon">üí°</div>
								<div class="priority-content">
									<h3>–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</h3>
									<p>–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è</p>
								</div>
							</div>
						</div>
					</section>

					<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è -->
					<section class="card">
						<div class="card-header">
							<h2 class="card-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è</h2>
						</div>
						<div class="stats-grid">
							<div class="stat-item">
								<div class="stat-value" id="plannedCourses">0</div>
								<div class="stat-label">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –∫—É—Ä—Å–æ–≤</div>
							</div>
							<div class="stat-item">
								<div class="stat-value" id="completionRate">0%</div>
								<div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞</div>
							</div>
							<div class="stat-item">
								<div class="stat-value" id="avgPriority">-</div>
								<div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</div>
							</div>
						</div>
					</section>
				</div>
			</main>
		</div>

		<script src="../scripts/auth.js"></script>
		<script src="../scripts/plan.js"></script>

		<script>
			document.addEventListener('DOMContentLoaded', function () {
				// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
				if (!AuthManager.checkAuth()) {
					window.location.href = 'login.html'
					return
				}

				// –û–±–Ω–æ–≤–ª—è–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
				const userData = AuthManager.getUserData()
				if (userData && userData.employee) {
					const userNameElement = document.getElementById('userName')
					if (userNameElement) {
						userNameElement.textContent =
							userData.employee.name.split(' ')[0] +
							' ' +
							userData.employee.name.split(' ')[1]
					}
				}

				// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–Ω–∞ –æ–±—É—á–µ–Ω–∏—è
				if (typeof PlanManager !== 'undefined') {
					new PlanManager()
				}

				// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã—Ö–æ–¥–∞
				const logoutBtn = document.getElementById('logoutBtn')
				if (logoutBtn) {
					logoutBtn.addEventListener('click', () => {
						localStorage.removeItem('authToken')
						localStorage.removeItem('userData')
						window.location.href = 'login.html'
					})
				}

				// –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
				const navToggle = document.getElementById('navToggle')
				const navMenu = document.getElementById('navMenu')

				if (navToggle && navMenu) {
					navToggle.addEventListener('click', () => {
						navMenu.classList.toggle('active')
					})
				}
			})
		</script>
	</body>
</html>
